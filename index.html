<!DOCTYPE html>
<html>
<head>
    <meta name="x-poe-datastore-behavior" content="local_only">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://code.jquery.com https://unpkg.com https://d3js.org https://threejs.org https://cdn.plot.ly https://stackpath.bootstrapcdn.com https://maps.googleapis.com https://cdn.tailwindcss.com https://ajax.googleapis.com https://kit.fontawesome.com https://cdn.datatables.net https://maxcdn.bootstrapcdn.com https://code.highcharts.com https://tako-static-assets-production.s3.amazonaws.com https://www.youtube.com https://fonts.googleapis.com https://fonts.gstatic.com https://pfst.cf2.poecdn.net https://puc.poecdn.net https://i.imgur.com https://wikimedia.org https://*.icons8.com https://*.giphy.com https://picsum.photos https://images.unsplash.com; frame-src 'self' https://www.youtube.com https://trytako.com; child-src 'self'; manifest-src 'self'; worker-src 'self'; upgrade-insecure-requests; block-all-mixed-content;">
    <meta name="x-poe-datastore-behavior" content="local_only">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://code.jquery.com https://unpkg.com https://d3js.org https://threejs.org https://cdn.plot.ly https://stackpath.bootstrapcdn.com https://maps.googleapis.com https://cdn.tailwindcss.com https://ajax.googleapis.com https://kit.fontawesome.com https://cdn.datatables.net https://maxcdn.bootstrapcdn.com https://code.highcharts.com https://tako-static-assets-production.s3.amazonaws.com https://www.youtube.com https://fonts.googleapis.com https://fonts.gstatic.com https://pfst.cf2.poecdn.net https://puc.poecdn.net https://i.imgur.com https://wikimedia.org https://*.icons8.com https://*.giphy.com https://picsum.photos https://images.unsplash.com; frame-src 'self' https://www.youtube.com https://trytako.com; child-src 'self'; manifest-src 'self'; worker-src 'self'; upgrade-insecure-requests; block-all-mixed-content;">
    <meta name="x-poe-datastore-behavior" content="local_only">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://code.jquery.com https://unpkg.com https://d3js.org https://threejs.org https://cdn.plot.ly https://stackpath.bootstrapcdn.com https://maps.googleapis.com https://cdn.tailwindcss.com https://ajax.googleapis.com https://kit.fontawesome.com https://cdn.datatables.net https://maxcdn.bootstrapcdn.com https://code.highcharts.com https://tako-static-assets-production.s3.amazonaws.com https://www.youtube.com https://fonts.googleapis.com https://fonts.gstatic.com https://pfst.cf2.poecdn.net https://puc.poecdn.net https://i.imgur.com https://wikimedia.org https://*.icons8.com https://*.giphy.com https://picsum.photos https://images.unsplash.com; frame-src 'self' https://www.youtube.com https://trytako.com; child-src 'self'; manifest-src 'self'; worker-src 'self'; upgrade-insecure-requests; block-all-mixed-content;">
    <meta name="x-poe-datastore-behavior" content="local_only">
    <meta http-equiv="Content-Security-Policy" content="
        default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://code.jquery.com https://unpkg.com https://d3js.org https://threejs.org https://cdn.plot.ly https://stackpath.bootstrapcdn.com https://maps.googleapis.com https://cdn.tailwindcss.com https://ajax.googleapis.com https://kit.fontawesome.com https://cdn.datatables.net https://maxcdn.bootstrapcdn.com https://code.highcharts.com https://tako-static-assets-production.s3.amazonaws.com https://www.youtube.com https://fonts.googleapis.com https://fonts.gstatic.com https://pfst.cf2.poecdn.net https://puc.poecdn.net https://i.imgur.com https://wikimedia.org https://*.icons8.com https://*.giphy.com https://picsum.photos https://images.unsplash.com;
        connect-src 'self' http://localhost:3001 http://ip-api.com https://ssl-checker.io;
        frame-src 'self' https://www.youtube.com https://trytako.com;
        child-src 'self';
        manifest-src 'self';
        worker-src 'self';
        upgrade-insecure-requests;
        block-all-mixed-content;">
    <meta http-equiv="x-dns-prefetch-control" content="off">
    <meta name="x-poe-allow-downloads" content="true">
    <script src="https://puc.poecdn.net/authenticated_preview_page/standard.3ef2c256959faf5a756d.js"></script>
    <meta charset="utf-8">
    <title>Domain Checking</title>
    <link rel="icon" type="image/png" href="domainCheckingAppLogo.png">
    <link rel="shortcut icon" type="image/png" href="domainCheckingAppLogo.png">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <script src="https://puc.poecdn.net/authenticated_preview_page/disableWebRTC.9710cebe07429a9e8e06.js"></script>
    <script src="https://puc.poecdn.net/authenticated_preview_page/tw.b9024aecac666455e183.js"></script>
    <script src="https://puc.poecdn.net/authenticated_preview_page/deps.faccd16000d314dc16d5.js"></script>
    <script src="https://puc.poecdn.net/authenticated_preview_page/exports.b0f0f482cdeb5302b0b9.js"></script>
    <script src="https://puc.poecdn.net/authenticated_preview_page/renderer.75c73ae6b4235f62945a.js"></script>
    <script>
        Object.defineProperty(exports, "__esModule", {value: true});
        function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
        var _react = require('react');
        var _react2 = _interopRequireDefault(_react);
        var _lucidereact = require('lucide-react');

        function SSLTool() {
            const [activeTab, setActiveTab] = _react.useState.call(void 0, 'domain');
            const [domainInput, setDomainInput] = _react.useState.call(void 0, '');
            const [domainInfo, setDomainInfo] = _react.useState.call(void 0, null);
            const [sslRequestLink, setSslRequestLink] = _react.useState.call(void 0, '');
            const [domainManagementLink, setDomainManagementLink] = _react.useState.call(void 0, '');
            const [inputLink, setInputLink] = _react.useState.call(void 0, '');
            const [extractedId, setExtractedId] = _react.useState.call(void 0, '');
            const [sslLinks, setSslLinks] = _react.useState.call(void 0, {});
            const [privateKey, setPrivateKey] = _react.useState.call(void 0, '');
            const [certificate, setCertificate] = _react.useState.call(void 0, '');
            const [caRoot, setCaRoot] = _react.useState.call(void 0, '');
            const [formattedText, setFormattedText] = _react.useState.call(void 0, '');
            const [copied, setCopied] = _react.useState.call(void 0, {});
            const [domainSearchLink, setDomainSearchLink] = _react.useState.call(void 0, '');
            const [copiedDomainSearch, setCopiedDomainSearch] = _react.useState.call(void 0, false);
            const [sslInfo, setSslInfo] = _react.useState.call(void 0, null);

            // Th√™m states cho vi·ªác theo d√µi ti·∫øn tr√¨nh ph√¢n t√≠ch
            const [isAnalyzing, setIsAnalyzing] = _react.useState.call(void 0, false);
            const [analysisProgress, setAnalysisProgress] = _react.useState.call(void 0, {
                whois: { loading: false, completed: false, error: null },
                hosting: { loading: false, completed: false, error: null },
                ssl: { loading: false, completed: false, error: null }
            });

            const apiUrl = window.location.hostname === "localhost"
                ? "http://localhost:3001"
                : window.location.origin;
            // console.log("API URL being used:", apiUrl);

            // Function to clean domain input (x√≥a http/https prefix)
            const cleanDomainInput = (input) => {
                if (!input) return '';

                // X√≥a http://, https://, www. v√† trailing slash
                let cleaned = input.trim()
                    .replace(/^https?:\/\//, '')
                    // .replace(/^www\./, '')
                    .replace(/\/$/, '');

                // N·∫øu c√≥ path sau domain, ch·ªâ l·∫•y ph·∫ßn domain
                const pathIndex = cleaned.indexOf('/');
                if (pathIndex > 0) {
                    cleaned = cleaned.substring(0, pathIndex);
                }

                return cleaned;
            };

            // Function to generate SSL search link
            const generateDomainSearchLink = (domain) => {
                if (!domain) return '';
                const cleanDomain = cleanDomainInput(domain);
                return `https://support.pavietnam.vn/index.php?pa=hangdoissl&domain=${cleanDomain}&from_date=2024-01-01&to_date=2030-12-31`;
            };

            // Handle domain input change v·ªõi auto-clean
            const handleDomainInputChange = (e) => {
                const rawInput = e.target.value;
                const cleanedDomain = cleanDomainInput(rawInput);
                setDomainInput(cleanedDomain);
                setDomainSearchLink(generateDomainSearchLink(cleanedDomain));
            };

            // Handle Enter key press
            const handleKeyPress = (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    const cleanedDomain = cleanDomainInput(domainInput);
                    if (cleanedDomain) {
                        analyzeDomain(cleanedDomain);
                    }
                }
            };

            // Fetch SSL information t·ª´ API (kh√¥ng ƒë·ªïi)
            const fetchSSLInfo = async (domain) => {
                try {
                    const response = await fetch(`${apiUrl}/api/ssl-summary/${domain}`);

                    const data = await response.json();
                    console.log("SSL API response:", data);

                    if (data.error) {
                        return {
                            exists: false,
                            error: data.error
                        };
                    }

                    return {
                        exists: true,
                        domain: data.domain,
                        ip: data.ip,
                        issued_to: data.issued_to,
                        issued_org: data.issued_org,
                        issuer: data.issuer,
                        valid_from: data.valid_from,
                        valid_to: data.valid_to,
                        days_remaining: data.days_remaining,
                        is_valid: data.is_valid
                    };
                } catch (err) {
                    console.error('SSL fetch error:', err);
                    return {
                        exists: false,
                        error: 'Kh√¥ng th·ªÉ k·∫øt n·ªëi t·ªõi SSL API'
                    };
                }
            };

            // L·∫•y th√¥ng tin WHOIS t·ª´ proxy server (whois.net.vn)
            const fetchWhoisInfo = async (domain) => {
                try {
                    const response = await fetch(`${apiUrl}/api/whois/${domain}`);

                    const rawText = await response.text();
                    console.log("WHOIS raw:", rawText);

                    // L√†m s·∫°ch HTML th√†nh text
                    const cleanText = rawText
                        .replace(/<br\s*\/?>/gi, "\n")
                        .replace(/<.*?>/g, '')
                        .trim();

                    const getMatch = (regex) => {
                        const match = cleanText.match(regex);
                        return match ? match[1].trim() : '';
                    };

                    // L·∫•y Registrar (h·ªó tr·ª£ c·∫£ .vn v√† .com)
                    const registrar =
                        getMatch(/Registrar Name\s*:\s*(.+)/i) ||
                        getMatch(/Registrar:\s*(.+)/i);

                    // L·∫•y Owner (h·ªó tr·ª£ c·∫£ c√°c format kh√°c nhau)
                    const owner =
                        getMatch(/Owner Name\s*:\s*(.+)/i) ||
                        getMatch(/Registrant Organization\s*:\s*(.+)/i) ||
                        getMatch(/Registrant:\s*(.+)/i);

                    // L·∫•y Status (c·∫£ d√≤ng nhi·ªÅu tr·∫°ng th√°i)
                    // --- B·ªî SUNG: Ki·ªÉm tra v√† ƒë√°nh d·∫•u clientHold ---
                    let status = getMatch(/Status\s*:\s*(.+)/i) || getMatch(/Domain Status:\s*(.+)/i);
                    let isClientHold = false;
                    if (status && status.toLowerCase().includes('clienthold')) {
                        isClientHold = true;
                        // N·∫øu mu·ªën ch·ªâ hi·ªÉn th·ªã clientHold khi n√≥ c√≥:
                        // status = 'clientHold';
                    }
                    // --- H·∫æT B·ªî SUNG ---

                    // L·∫•y ng√†y ƒëƒÉng k√Ω v√† h·∫øt h·∫°n
                    const issueDateRaw = getMatch(/Issue Date\s*:\s*(.+)/i) || getMatch(/Creation Date\s*:\s*(.+)/i);
                    const expiredDateRaw = getMatch(/Expired Date\s*:\s*(.+)/i) || getMatch(/Registry Expiry Date\s*:\s*(.+)/i);

                    // ƒê·ªãnh d·∫°ng l·∫°i ng√†y th√°ng
                    const formatDate = (dateString) => {
                        if (!dateString) return '';
                        try {
                            // Ph√¢n t√≠ch c√°c ƒë·ªãnh d·∫°ng c√≥ th·ªÉ c√≥, v√≠ d·ª•: 2025-07-30T20:54:52+07:00 ho·∫∑c 1997-09-15T04:00:00Z
                            const date = new Date(dateString);
                            if (isNaN(date.getTime())) return dateString; // Tr·∫£ v·ªÅ g·ªëc n·∫øu parse l·ªói
                            return date.toLocaleDateString('vi-VN'); // ƒê·ªãnh d·∫°ng ng√†y th√°ng ti·∫øng Vi·ªát
                        } catch (e) {
                            return dateString; // Tr·∫£ v·ªÅ g·ªëc n·∫øu c√≥ l·ªói
                        }
                    };

                    const formattedIssueDate = formatDate(issueDateRaw);
                    const formattedExpiredDate = formatDate(expiredDateRaw);

                    // L·∫•y Nameservers
                    let nameservers = [];
                    const nsMatches = cleanText.match(/Name Server:\s*(.+)/gi);
                    if (nsMatches) {
                        nameservers = nsMatches.map(ns => ns.split(':')[1].trim());
                    } else {
                        const dnsRaw = getMatch(/DNS\s*:\s*(.+)/i);
                        if (dnsRaw) {
                            nameservers = dnsRaw.split(',').map(ns => ns.trim()).filter(Boolean);
                        }
                    }

                    return { registrar, owner, status, nameservers, raw: cleanText, formattedIssueDate, formattedExpiredDate, isClientHold };
                } catch (err) {
                    console.error('WHOIS fetch error:', err);
                    return { registrar: 'Error', owner: '', status: '', nameservers: [], raw: '', formattedIssueDate: '', formattedExpiredDate: '', isClientHold: false };
                }
            };

            const fetchHostingInfo = async (domain) => {
                try {
                    const response = await fetch(`${apiUrl}/api/ip/${domain}`);

                    const data = await response.json();
                    console.log("IP/Hosting raw:", data);

                    return {
                        ip: data.query || '',
                        country: data.country || '',
                        as: data.as || '',
                        isp: data.isp || ''
                    };
                } catch (err) {
                    console.error('IP/Hosting fetch error:', err);
                    return { ip: '', country: '', as: '', isp: '' };
                }
            };

            // Enhanced analyze function v·ªõi parallel execution - SONG SONG thay v√¨ tu·∫ßn t·ª±
            const analyzeDomain = async (domain) => {
                if (!domain || typeof domain !== 'string') return;

                const cleanedDomain = cleanDomainInput(domain);
                console.log("üîç Analyzing domain:", cleanedDomain);

                // Reset states
                setIsAnalyzing(true);
                setDomainInfo(null);
                setSslInfo(null);
                setAnalysisProgress({
                    whois: { loading: true, completed: false, error: null },
                    hosting: { loading: true, completed: false, error: null },
                    ssl: { loading: true, completed: false, error: null }
                });

                // T·∫°o base domain info ngay l·∫≠p t·ª©c
                const baseDomainInfo = {
                    domain: cleanedDomain,
                    registrar: '',
                    status: '',
                    nameservers: [],
                    ip: '',
                    country: '',
                    as: '',
                    isp: '',
                    formattedIssueDate: '', // Kh·ªüi t·∫°o cho ng√†y ƒëƒÉng k√Ω
                    formattedExpiredDate: '', // Kh·ªüi t·∫°o cho ng√†y h·∫øt h·∫°n
                    isClientHold: false, // Kh·ªüi t·∫°o cho clientHold
                    ssl: null
                };

                setDomainInfo(baseDomainInfo);

                // THAY ƒê·ªîI CH√çNH: Ch·∫°y T·∫§T C·∫¢ c√°c API song song thay v√¨ tu·∫ßn t·ª±
                const promises = [
                    // WHOIS Promise
                    fetchWhoisInfo(cleanedDomain).then(whoisInfo => {
                        // C·∫≠p nh·∫≠t domain info v·ªõi WHOIS data ngay khi c√≥
                        setDomainInfo(prev => ({
                            ...prev,
                            registrar: whoisInfo.registrar,
                            status: whoisInfo.status,
                            nameservers: whoisInfo.nameservers,
                            formattedIssueDate: whoisInfo.formattedIssueDate, // C·∫≠p nh·∫≠t ng√†y ƒëƒÉng k√Ω
                            formattedExpiredDate: whoisInfo.formattedExpiredDate, // C·∫≠p nh·∫≠t ng√†y h·∫øt h·∫°n
                            isClientHold: whoisInfo.isClientHold // C·∫≠p nh·∫≠t tr·∫°ng th√°i clientHold
                        }));

                        setAnalysisProgress(prev => ({
                            ...prev,
                            whois: { loading: false, completed: true, error: null }
                        }));
                    }).catch(err => {
                        setAnalysisProgress(prev => ({
                            ...prev,
                            whois: { loading: false, completed: false, error: err.message }
                        }));
                    }),

                    // Hosting Promise
                    fetchHostingInfo(cleanedDomain).then(hostingInfo => {
                        // C·∫≠p nh·∫≠t domain info v·ªõi hosting data ngay khi c√≥
                        setDomainInfo(prev => ({
                            ...prev,
                            ip: hostingInfo.ip,
                            country: hostingInfo.country,
                            as: hostingInfo.as,
                            isp: hostingInfo.isp
                        }));

                        setAnalysisProgress(prev => ({
                            ...prev,
                            hosting: { loading: false, completed: true, error: null }
                        }));
                    }).catch(err => {
                        setAnalysisProgress(prev => ({
                            ...prev,
                            hosting: { loading: false, completed: false, error: err.message }
                        }));
                    }),

                    // SSL Promise
                    fetchSSLInfo(cleanedDomain).then(sslData => {
                        // C·∫≠p nh·∫≠t SSL info ngay khi c√≥
                        setSslInfo(sslData);

                        setAnalysisProgress(prev => ({
                            ...prev,
                            ssl: { loading: false, completed: true, error: null }
                        }));
                    }).catch(err => {
                        setAnalysisProgress(prev => ({
                            ...prev,
                            ssl: { loading: false, completed: false, error: err.message }
                        }));
                    })
                ];

                // Ch·ªù t·∫•t c·∫£ promises ho√†n th√†nh (nh∆∞ng m·ªói c√°i s·∫Ω update UI ngay khi xong)
                try {
                    await Promise.allSettled(promises);
                } catch (err) {
                    console.error('Analysis error:', err);
                } finally {
                    setIsAnalyzing(false);
                }
            };

            const getResponseText = (registrar, hosting, nameservers) => {
                const isPARegistrar = registrar === 'P.A. Viet Nam Company Limited';
                const isSuperDataHosting = hosting === 'SUPERDATA-VN';
                const isPANameserver = nameservers.some(ns =>
                    ns.includes('pavietnam.vn') || ns.includes('pavietnam.net')
                );

                if (!isPARegistrar && !isSuperDataHosting) {
                    return `Qu√Ω kh√°ch tham kh·∫£o h∆∞·ªõng d·∫´n sau ƒë·ªÉ ch·ªß ƒë·ªông t·ª± ƒêƒÉng k√Ω/Gia h·∫°n k√≠ch ho·∫°t ch·ª©ng ch·ªâ SSL tr√™n t√†i kho·∫£n support:

https://kb.pavietnam.vn/kich-hoat-va-quan-ly-ssl.html

N·∫øu Qu√Ω kh√°ch g·∫∑p kh√≥ khƒÉn hay v·∫•n ƒë·ªÅ trong vi·ªác k√≠ch ho·∫°t SSL, Qu√Ω kh√°ch vui l√≤ng ph·∫£n h·ªìi l·∫°i m√£ c√¢u h·ªèi ƒë·ªÉ ch√∫ng t√¥i c√≥ th·ªÉ h·ªó tr·ª£. Sau khi th√†nh c√¥ng v√† nh·∫≠n ch·ª©ng ch·ªâ Qu√Ω kh√°ch c√≥ th·ªÉ c√†i ƒë·∫∑t v√†o d·ªãch v·ª•.

Trong tr∆∞·ªùng h·ª£p, Qu√Ω kh√°ch ·ªßy quy·ªÅn P.A th·ª±c hi·ªán thay vi·ªác ƒêƒÉng k√Ω/Gia h·∫°n k√≠ch ho·∫°t ho·∫∑c t√≠ch h·ª£p v√†o d·ªãch v·ª• Qu√Ω kh√°ch ph·∫£n h·ªìi: T√¥i ƒë·ªìng √Ω ƒë·ªÉ P.A ƒë∆∞·ª£c uy quy·ªÅn cho ph√©p k√≠ch ho·∫°t ch·ª©ng ch·ªâ SSL(n·∫øu t√™n mi·ªÅn ƒë∆∞·ª£c qu·∫£n l√Ω n∆°i kh√°c ch√∫ng t√¥i s·∫Ω c·∫ßn s·ª± ph·ªëi h·ª£p th√™m t·ª´ Qu√Ω kh√°ch). K·ªπ thu·∫≠t s·∫Ω ti·∫øn h√†nh c√°c b∆∞·ªõc ti·∫øp theo sau khi nh·∫≠n ƒë∆∞·ª£c x√°c nh·∫≠n. Qu√° tr√¨nh k·ªπ thu·∫≠t ti·∫øn h√†nh ƒëƒÉng k√Ω SSL c·∫ßn x√°c th·ª±c do ƒë√≥ ph√≠a k·ªπ thu·∫≠t s·∫Ω ch·ªß ƒë·ªông th·ª±c hi·ªán 1 trong c√°c c·∫≠p nh·∫≠t thay ƒë·ªïi sau ƒë·ªÉ ho√†n t·∫•t b∆∞·ªõc x√°c th·ª±c SSL

Th√™m c·∫•u h√¨nh DNS t√™n mi·ªÅn (th·ªùi gian nhanh)
T·∫°o th√™m ƒë·ªãa ch·ªâ email admin@ ho·∫∑c administrator@
T·∫°o th√™m file txt tr√™n web

Trong tr∆∞·ªùng h·ª£p, Qu√Ω kh√°ch h√†ng kh√¥ng ph·∫£n h·ªìi l·∫°i ho·∫∑c kh√¥ng th·ª±c hi·ªán theo h∆∞·ªõng d·∫´n, c√≥ th·ªÉ d·∫´n t·ªõi vi·ªác ti·∫øn tr√¨nh ƒëƒÉng k√Ω kh√¥ng ƒë∆∞·ª£c th·ª±c hi·ªán ho√†n t·∫•t v√† ch√∫ng t√¥i xin ph√©p ƒë∆∞·ª£c mi·ªÖn tr·ª´ tr√°ch nhi·ªám. Mong nh·∫≠n ƒë∆∞·ª£c s·ª± h·ªó tr·ª£ v√† h·ª£p t√°c c·ªßa Qu√Ω kh√°ch v√† c·∫£m ∆°n Qu√Ω kh√°ch ƒëƒÉ ƒëƒÉng k√Ω s·ª≠ d·ª•ng d·ªãch v·ª•.`;
                }

                if (isPARegistrar && !isSuperDataHosting && !isPANameserver) {
                    return `Qu√Ω kh√°ch tham kh·∫£o h∆∞·ªõng d·∫´n sau ƒë·ªÉ ch·ªß ƒë·ªông t·ª± ƒêƒÉng k√Ω/Gia h·∫°n k√≠ch ho·∫°t ch·ª©ng ch·ªâ SSL tr√™n t√†i kho·∫£n support:

https://kb.pavietnam.vn/kich-hoat-va-quan-ly-ssl.html

N·∫øu Qu√Ω kh√°ch g·∫∑p kh√≥ khƒÉn hay v·∫•n ƒë·ªÅ trong vi·ªác k√≠ch ho·∫°t SSL, Qu√Ω kh√°ch vui l√≤ng ph·∫£n h·ªìi l·∫°i m√£ c√¢u h·ªèi ƒë·ªÉ ch√∫ng t√¥i c√≥ th·ªÉ h·ªó tr·ª£. Sau khi th√†nh c√¥ng v√† nh·∫≠n ch·ª©ng ch·ªâ Qu√Ω kh√°ch c√≥ th·ªÉ c√†i ƒë·∫∑t v√†o d·ªãch v·ª•.

Trong tr∆∞·ªùng h·ª£p, Qu√Ω kh√°ch ·ªßy quy·ªÅn P.A th·ª±c hi·ªán thay vi·ªác ƒêƒÉng k√Ω/Gia h·∫°n k√≠ch ho·∫°t ho·∫∑c t√≠ch h·ª£p v√†o d·ªãch v·ª• Qu√Ω kh√°ch ph·∫£n h·ªìi: T√¥i ƒë·ªìng √Ω ƒë·ªÉ P.A ƒë∆∞·ª£c uy quy·ªÅn cho ph√©p k√≠ch ho·∫°t ch·ª©ng ch·ªâ SSL(n·∫øu t√™n mi·ªÅn ƒë∆∞·ª£c qu·∫£n l√Ω n∆°i kh√°c ch√∫ng t√¥i s·∫Ω c·∫ßn s·ª± ph·ªëi h·ª£p th√™m t·ª´ Qu√Ω kh√°ch). K·ªπ thu·∫≠t s·∫Ω ti·∫øn h√†nh c√°c b∆∞·ªõc ti·∫øp theo sau khi nh·∫≠n ƒë∆∞·ª£c x√°c nh·∫≠n. Qu√° tr√¨nh k·ªπ thu·∫≠t ti·∫øn h√†nh ƒëƒÉng k√Ω SSL c·∫ßn x√°c th·ª±c do ƒë√≥ ph√≠a k·ªπ thu·∫≠t s·∫Ω ch·ªß ƒë·ªông th·ª±c hi·ªán 1 trong c√°c c·∫≠p nh·∫≠t thay ƒë·ªïi sau ƒë·ªÉ ho√†n t·∫•t b∆∞·ªõc x√°c th·ª±c SSL

Th√™m c·∫•u h√¨nh DNS t√™n mi·ªÅn (th·ªùi gian nhanh)
T·∫°o th√™m ƒë·ªãa ch·ªâ email admin@ ho·∫∑c administrator@
T·∫°o th√™m file txt tr√™n web

Trong tr∆∞·ªùng h·ª£p, Qu√Ω kh√°ch h√†ng kh√¥ng ph·∫£n h·ªìi l·∫°i ho·∫∑c kh√¥ng th·ª±c hi·ªán theo h∆∞·ªõng d·∫´n, c√≥ th·ªÉ d·∫´n t·ªõi vi·ªác ti·∫øn tr√¨nh ƒëƒÉng k√Ω kh√¥ng ƒë∆∞·ª£c th·ª±c hi·ªán ho√†n t·∫•t v√† ch√∫ng t√¥i xin ph√©p ƒë∆∞·ª£c mi·ªÖn tr·ª´ tr√°ch nhi·ªám. Mong nh·∫≠n ƒë∆∞·ª£c s·ª± h·ªó tr·ª£ v√† h·ª£p t√°c c·ªßa Qu√Ω kh√°ch v√† c·∫£m ∆°n Qu√Ω kh√°ch ƒëƒÉ ƒëƒÉng k√Ω s·ª≠ d·ª•ng d·ªãch v·ª•.`;
                }

                if (!isPARegistrar && isSuperDataHosting) {
                    return "C√¢n nh·∫Øc c·∫•u h√¨nh x√°c th·ª±c SSL qua file base v√¨ hosting ƒë·∫∑t t·∫°i PA Vietnam";
                }

                if (isPARegistrar && isSuperDataHosting) {
                    return "C·∫ßn nh·∫≠p link SSL request ƒë·ªÉ t·∫°o link qu·∫£n tr·ªã domain cho x√°c th·ª±c DNS.";
                }

                return "Tr∆∞·ªùng h·ª£p ƒë·∫∑c bi·ªát, vui l√≤ng ki·ªÉm tra th·ªß c√¥ng.";
            };

            const processSSLRequestLink = () => {
                if (!sslRequestLink) return;

                // Extract auth from SSL request link
                const authMatch = sslRequestLink.match(/auth=([a-f0-9]+)/);
                if (!authMatch) return;

                const auth = authMatch[1];
                const domain = domainInput.replace(/^[^.]+\./, ''); // Remove subdomain if present

                // Mock domain management link generation
                const mockId = '294574';
                const managementLink = `https://support.pavietnam.vn/index.php?pa=dnsvn&idaccount=${mockId}`;
                setDomainManagementLink(managementLink);
            };

            const extractIdFromLink = (link) => {
                const match = link.match(/id=(\d+)/);
                return match ? match[1] : '';
            };

            const generateSSLLinks = (id) => {
                const baseUrl = 'https://support.pavietnam.vn/index.php?pa=ssl-helper';
                return {
                    order: `${baseUrl}&act=orderDetail&id=${id}`,
                    register: `${baseUrl}&act=requestRegisterSsl&id=${id}&action=register`,
                    renew: `${baseUrl}&act=requestRegisterSsl&id=${id}&action=renew`,
                    download: `https://support.pavietnam.vn/?pa=ssl-helper&act=downloadCert&id=${id}`
                };
            };

            const handleSSLLinkInput = (e) => {
                const link = e.target.value;
                setInputLink(link);

                const id = extractIdFromLink(link);
                setExtractedId(id);

                if (id) {
                    const links = generateSSLLinks(id);
                    setSslLinks(links);
                } else {
                    setSslLinks({});
                }
            };

            const generateFormattedText = () => {
                if (!privateKey && !certificate && !caRoot) return;

                const formatted = `Ch√∫ng t√¥i g·ª≠i th√¥ng tin ch·ª©ng ch·ªâ SSL, qu√Ω kh√°ch vui l√≤ng ki·ªÉm tra l·∫°i v√† c√†i ƒë·∫∑t l√™n hosting/server ƒë·ªÉ s·ª≠ d·ª•ng:

#Private Key:
${privateKey}

#Certificate:
${certificate}

#CA:
${caRoot}`;

                setFormattedText(formatted);
            };

            const copyToClipboard = async (text, type) => {
                try {
                    await navigator.clipboard.writeText(text);
                    setCopied({ ...copied, [type]: true });
                    setTimeout(() => setCopied({ ...copied, [type]: false }), 2000);
                } catch (err) {
                    console.error('Failed to copy: ', err);
                }
            };

            // --- B·ªî SUNG: N√∫t truy c·∫≠p website ---
            const openWebsite = (domain) => {
                if (!domain) return;
                // ƒê·∫£m b·∫£o l√† URL h·ª£p l·ªá, th√™m http:// n·∫øu c·∫ßn
                const url = domain.startsWith('http://') || domain.startsWith('https://') ? domain : `http://${domain}`;
                window.open(url, '_blank');
            };
            // --- H·∫æT B·ªî SUNG ---


            const openLink = (url) => {
                window.open(url, '_blank');
            };

            // Function to calculate renewal date (20 days before expiration)
            const calculateRenewalDate = (validTo) => {
                if (!validTo) return '';
                try {
                    const expirationDate = new Date(validTo);
                    const renewalDate = new Date(expirationDate.getTime() - (20 * 24 * 60 * 60 * 1000)); // 20 days before
                    return renewalDate.toLocaleDateString('vi-VN');
                } catch (err) {
                    return '';
                }
            };

            // Function to format SSL expiration date
            const formatSSLDate = (dateString) => {
                if (!dateString) return '';
                try {
                    const date = new Date(dateString);
                    return date.toLocaleDateString('vi-VN');
                } catch (err) {
                    return dateString;
                }
            };

            // Function to generate SSL renewal notice template
            const generateSSLRenewalNotice = (sslInfo) => {
                if (!sslInfo || !sslInfo.exists || sslInfo.days_remaining < 30) return '';

                const expirationDate = formatSSLDate(sslInfo.valid_to);
                const renewalDate = calculateRenewalDate(sslInfo.valid_to);

                return `Hi·ªán t·∫°i d·ªãch v·ª• SSL c·ªßa Qu√Ω kh√°ch c√≥ th·ªùi h·∫°n ƒë·∫øn ${expirationDate}.

Theo quy ƒë·ªãnh t·ª´ ph√≠a SSL, vi·ªác gia h·∫°n ch·ªâ c√≥ th·ªÉ th·ª±c hi·ªán khi ch·ª©ng ch·ªâ c√≤n th·ªùi h·∫°n d∆∞·ªõi 30 ng√†y, ƒë·ªÉ ƒë∆∞·ª£c c·ªông d·ªìn ng√†y s·ª≠ d·ª•ng tr∆∞·ªõc ƒë√≥.

Ch√∫ng t√¥i ƒë√£ ghi nh·∫≠n th√¥ng tin v√† s·∫Ω ti·∫øn h√†nh gia h·∫°n cho Qu√Ω kh√°ch khi th·ªùi h·∫°n d∆∞·ªõi 30 ng√†y, d·ª± ki·∫øn v√†o kho·∫£ng ${renewalDate}.`;
            };

            // --- CSS Styling cho Status clientHold ---
            const statusClasses = `text-sm font-medium mr-2 px-2.5 py-0.5 rounded ${
                domainInfo?.isClientHold ? 'bg-red-100 text-red-800' : 'bg-gray-100 text-gray-800'
            }`;
            // --- H·∫æT CSS Styling ---


            return (
                _react2.default.createElement('div', { className: "min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4" },
                    _react2.default.createElement('div', { className: "max-w-6xl mx-auto" },
                        _react2.default.createElement('div', { className: "bg-white rounded-lg shadow-lg p-6" },
                            _react2.default.createElement('div', { className: "text-center mb-8" },
                                _react2.default.createElement('h1', { className: "text-3xl font-bold text-gray-800 mb-2" }, "SSL Management Tool - Enhanced"),
                                _react2.default.createElement('p', { className: "text-gray-600" }, "C√¥ng c·ª• qu·∫£n l√Ω SSL n√¢ng cao - Ph√¢n t√≠ch Domain, Qu·∫£n l√Ω SSL v√† T·∫°o ch·ª©ng ch·ªâ")
                            ),

                            /* Tab Navigation */
                            _react2.default.createElement('div', { className: "flex border-b border-gray-200 mb-6" },
                                _react2.default.createElement('button', {
                                    onClick: () => setActiveTab('domain'),
                                    className: `px-6 py-3 font-medium ${activeTab === 'domain' ? 'border-b-2 border-blue-500 text-blue-600' : 'text-gray-500 hover:text-gray-700'}`,
                                },
                                    _react2.default.createElement(_lucidereact.Globe, { className: "w-5 h-5 inline mr-2" }), "Ph√¢n t√≠ch Domain"
                                ),
                                _react2.default.createElement('button', {
                                    onClick: () => setActiveTab('ssl'),
                                    className: `px-6 py-3 font-medium ${activeTab === 'ssl' ? 'border-b-2 border-blue-500 text-blue-600' : 'text-gray-500 hover:text-gray-700'}`,
                                },
                                    _react2.default.createElement(_lucidereact.Shield, { className: "w-5 h-5 inline mr-2" }), "Qu·∫£n l√Ω SSL"
                                ),
                                _react2.default.createElement('button', {
                                    onClick: () => setActiveTab('certificate'),
                                    className: `px-6 py-3 font-medium ${activeTab === 'certificate' ? 'border-b-2 border-blue-500 text-blue-600' : 'text-gray-500 hover:text-gray-700'}`,
                                },
                                    _react2.default.createElement(_lucidereact.Key, { className: "w-5 h-5 inline mr-2" }), "T·∫°o template SSL"
                                )
                            ),

                            /* Domain Analysis Tab */
                            activeTab === 'domain' && (
                                _react2.default.createElement('div', { className: "space-y-6" },
                                    _react2.default.createElement('div', { className: "bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-6" },
                                        _react2.default.createElement('div', { className: "flex items-center mb-4" },
                                            _react2.default.createElement(_lucidereact.Search, { className: "w-6 h-6 text-green-600 mr-3" }),
                                            _react2.default.createElement('h2', { className: "text-xl font-bold text-green-800" }, "B∆∞·ªõc 1: Ph√¢n t√≠ch Domain v√† SSL")
                                        ),

                                        _react2.default.createElement('div', { className: "space-y-4" },
                                            _react2.default.createElement('div', null,
                                                _react2.default.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, "Nh·∫≠p t√™n domain (v√≠ d·ª•: example.com):"),
                                                _react2.default.createElement('style', null, `
                                                    input::placeholder {
                                                        color: rgba(55, 65, 81, 0.5); /* Tailwind gray-700 with 50% opacity */
                                                        font-style: italic;
                                                        font-weight: 300;
                                                        font-family: 'Inter', sans-serif;
                                                        transition: color 0.3s ease-in-out;
                                                    }
                                                    input:focus::placeholder {
                                                        color: transparent; /* Hide placeholder on focus */
                                                    }
                                                    .status-clienthold {
                                                        color: #dc2626 !important; /* Red color for clientHold status */
                                                        font-weight: bold;
                                                    }
                                                `),
                                                _react2.default.createElement('input', {
                                                    type: "text",
                                                    value: domainInput,
                                                    onChange: handleDomainInputChange,
                                                    onKeyPress: handleKeyPress,
                                                    placeholder: "nh·∫≠p t√™n domain (v√≠ d·ª•: example.com)",
                                                    className: "w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                                                })
                                            ),
                                            _react2.default.createElement('button', {
                                                onClick: () => analyzeDomain(domainInput),
                                                disabled: isAnalyzing,
                                                className: `w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-white font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 ${isAnalyzing ? 'bg-gray-400 cursor-not-allowed' : 'bg-blue-600 hover:bg-blue-700 focus:ring-blue-500'}`,
                                            },
                                                isAnalyzing
                                                    ? _react2.default.createElement('span', null, "ƒêang ph√¢n t√≠ch...")
                                                    : _react2.default.createElement(_react2.default.Fragment, null, _react2.default.createElement(_lucidereact.Activity, { className: "w-5 h-5 mr-2" }), "Ph√¢n t√≠ch Domain")
                                            )
                                        )
                                    ),

                                    /* Analysis Results */
                                    domainInfo && (
                                        _react2.default.createElement('div', { className: "bg-white rounded-lg shadow-md p-6" },
                                            _react2.default.createElement('h2', { className: "text-xl font-bold text-gray-800 mb-4" }, "K·∫øt qu·∫£ Ph√¢n t√≠ch cho: ", _react2.default.createElement('span', { className: "text-blue-600" }, domainInfo.domain)),

                                            // --- Hi·ªÉn th·ªã progress ---
                                            _react2.default.createElement('div', { className: "mb-4" },
                                                _react2.default.createElement('h3', { className: "text-lg font-semibold text-gray-700 mb-2" }, "Ti·∫øn tr√¨nh Ph√¢n t√≠ch:"),
                                                _react2.default.createElement('div', { className: "flex items-center space-x-4" },
                                                    _react2.default.createElement('div', { className: `flex-1 ${analysisProgress.whois.error ? 'text-red-600' : ''}` },
                                                        _react2.default.createElement('div', { className: "flex items-center" },
                                                            analysisProgress.whois.loading && _react2.default.createElement('svg', { className: "animate-spin -ml-1 mr-3 h-4 w-4 text-blue-500", xmlns: "http://www.w3.org/2000/svg", fill: "none", viewBox: "0 0 24 24" }, _react2.default.createElement('circle', { className: "opacity-25", cx: "12", cy: "12", r: "10", stroke: "currentColor", 'stroke-width': "4" }), _react2.default.createElement('path', { className: "opacity-75", fill: "currentColor", d: "M4 12a8 8 0 018-8V4.5C14.08 3.69 15.12 3 16 3H8a2 2 0 00-2 2v12a2 2 0 002 2h8c.88 0 1.92-.69 3-1.5v-2.5a2 2 0 00-2-2H8a2 2 0 00-2-2z" })),
                                                            analysisProgress.whois.completed && !analysisProgress.whois.error && _react2.default.createElement('svg', { className: "w-4 h-4 text-green-500 mr-1", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", xmlns: "http://www.w3.org/2000/svg" }, _react2.default.createElement('path', { 'stroke-linecap': "round", 'stroke-linejoin': "round", 'stroke-width': "2", d: "M5 13l4 4L19 7" })),
                                                            analysisProgress.whois.error && _react2.default.createElement('svg', { className: "w-4 h-4 text-red-500 mr-1", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", xmlns: "http://www.w3.org/2000/svg" }, _react2.default.createElement('path', { 'stroke-linecap': "round", 'stroke-linejoin': "round", 'stroke-width': "2", d: "M6 18L18 6M6 6l12 12" })),
                                                            _react2.default.createElement('span', null, "WHOIS Data")
                                                        ),
                                                        analysisProgress.whois.error && _react2.default.createElement('div', { className: "text-xs italic" }, analysisProgress.whois.error)
                                                    ),
                                                    _react2.default.createElement('div', { className: `flex-1 ${analysisProgress.hosting.error ? 'text-red-600' : ''}` },
                                                        _react2.default.createElement('div', { className: "flex items-center" },
                                                            analysisProgress.hosting.loading && _react2.default.createElement('svg', { className: "animate-spin -ml-1 mr-3 h-4 w-4 text-blue-500", xmlns: "http://www.w3.org/2000/svg", fill: "none", viewBox: "0 0 24 24" }, _react2.default.createElement('circle', { className: "opacity-25", cx: "12", cy: "12", r: "10", stroke: "currentColor", 'stroke-width': "4" }), _react2.default.createElement('path', { className: "opacity-75", fill: "currentColor", d: "M4 12a8 8 0 018-8V4.5C14.08 3.69 15.12 3 16 3H8a2 2 0 00-2 2v12a2 2 0 002 2h8c.88 0 1.92-.69 3-1.5v-2.5a2 2 0 00-2-2H8a2 2 0 00-2-2z" })),
                                                            analysisProgress.hosting.completed && !analysisProgress.hosting.error && _react2.default.createElement('svg', { className: "w-4 h-4 text-green-500 mr-1", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", xmlns: "http://www.w3.org/2000/svg" }, _react2.default.createElement('path', { 'stroke-linecap': "round", 'stroke-linejoin': "round", 'stroke-width': "2", d: "M5 13l4 4L19 7" })),
                                                            analysisProgress.hosting.error && _react2.default.createElement('svg', { className: "w-4 h-4 text-red-500 mr-1", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", xmlns: "http://www.w3.org/2000/svg" }, _react2.default.createElement('path', { 'stroke-linecap': "round", 'stroke-linejoin': "round", 'stroke-width': "2", d: "M6 18L18 6M6 6l12 12" })),
                                                            _react2.default.createElement('span', null, "Hosting Info")
                                                        ),
                                                        analysisProgress.hosting.error && _react2.default.createElement('div', { className: "text-xs italic" }, analysisProgress.hosting.error)
                                                    ),
                                                    _react2.default.createElement('div', { className: `flex-1 ${analysisProgress.ssl.error ? 'text-red-600' : ''}` },
                                                        _react2.default.createElement('div', { className: "flex items-center" },
                                                            analysisProgress.ssl.loading && _react2.default.createElement('svg', { className: "animate-spin -ml-1 mr-3 h-4 w-4 text-blue-500", xmlns: "http://www.w3.org/2000/svg", fill: "none", viewBox: "0 0 24 24" }, _react2.default.createElement('circle', { className: "opacity-25", cx: "12", cy: "12", r: "10", stroke: "currentColor", 'stroke-width': "4" }), _react2.default.createElement('path', { className: "opacity-75", fill: "currentColor", d: "M4 12a8 8 0 018-8V4.5C14.08 3.69 15.12 3 16 3H8a2 2 0 00-2 2v12a2 2 0 002 2h8c.88 0 1.92-.69 3-1.5v-2.5a2 2 0 00-2-2H8a2 2 0 00-2-2z" })),
                                                            analysisProgress.ssl.completed && !analysisProgress.ssl.error && _react2.default.createElement('svg', { className: "w-4 h-4 text-green-500 mr-1", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", xmlns: "http://www.w3.org/2000/svg" }, _react2.default.createElement('path', { 'stroke-linecap': "round", 'stroke-linejoin': "round", 'stroke-width': "2", d: "M5 13l4 4L19 7" })),
                                                            analysisProgress.ssl.error && _react2.default.createElement('svg', { className: "w-4 h-4 text-red-500 mr-1", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", xmlns: "http://www.w3.org/2000/svg" }, _react2.default.createElement('path', { 'stroke-linecap': "round", 'stroke-linejoin': "round", 'stroke-width': "2", d: "M6 18L18 6M6 6l12 12" })),
                                                            _react2.default.createElement('span', null, "SSL Info")
                                                        ),
                                                        analysisProgress.ssl.error && _react2.default.createElement('div', { className: "text-xs italic" }, analysisProgress.ssl.error)
                                                    )
                                                )
                                            ),
                                            // --- H·∫øt progress ---


                                            _react2.default.createElement('div', { className: "grid grid-cols-1 md:grid-cols-2 gap-4" },
                                                _react2.default.createElement('div', null,
                                                    _react2.default.createElement('h3', { className: "text-lg font-semibold text-gray-700 mb-2" }, "Th√¥ng tin WHOIS"),
                                                    _react2.default.createElement('p', { className: "text-sm text-gray-600" },
                                                        _react2.default.createElement('strong', null, "Registrar:"), " ", domainInfo.registrar || 'N/A'
                                                    ),
                                                    _react2.default.createElement('p', { className: "text-sm text-gray-600" },
                                                        _react2.default.createElement('strong', null, "Owner:"), " ", domainInfo.owner || 'N/A'
                                                    ),
                                                    _react2.default.createElement('p', { className: "text-sm" },
                                                        _react2.default.createElement('strong', null, "Status:"), " ",
                                                        // --- B·ªî SUNG: Hi·ªÉn th·ªã Status v·ªõi highlight ---
                                                        _react2.default.createElement('span', { className: statusClasses }, domainInfo.status || 'N/A')
                                                        // --- H·∫æT B·ªî SUNG ---
                                                    ),
                                                    // --- B·ªî SUNG: Hi·ªÉn th·ªã ng√†y ƒëƒÉng k√Ω & h·∫øt h·∫°n ---
                                                    _react2.default.createElement('p', { className: "text-sm text-gray-600" },
                                                        _react2.default.createElement('strong', null, "Ng√†y ƒêƒÉng k√Ω:"), " ", domainInfo.formattedIssueDate || 'N/A'
                                                    ),
                                                    _react2.default.createElement('p', { className: "text-sm text-gray-600" },
                                                        _react2.default.createElement('strong', null, "Ng√†y H·∫øt h·∫°n:"), " ", domainInfo.formattedExpiredDate || 'N/A'
                                                    )
                                                    // --- H·∫æT B·ªî SUNG ---
                                                ),
                                                _react2.default.createElement('div', null,
                                                    _react2.default.createElement('h3', { className: "text-lg font-semibold text-gray-700 mb-2" }, "Th√¥ng tin Hosting & M·∫°ng"),
                                                    _react2.default.createElement('p', { className: "text-sm text-gray-600" },
                                                        _react2.default.createElement('strong', null, "IP Address:"), " ", domainInfo.ip || 'N/A'
                                                    ),
                                                    _react2.default.createElement('p', { className: "text-sm text-gray-600" },
                                                        _react2.default.createElement('strong', null, "Country:"), " ", domainInfo.country || 'N/A'
                                                    ),
                                                    _react2.default.createElement('p', { className: "text-sm text-gray-600" },
                                                        _react2.default.createElement('strong', null, "ISP:"), " ", domainInfo.isp || 'N/A'
                                                    ),
                                                    _react2.default.createElement('p', { className: "text-sm text-gray-600" },
                                                        _react2.default.createElement('strong', null, "AS Number:"), " ", domainInfo.as || 'N/A'
                                                    )
                                                )
                                            ),
                                            _react2.default.createElement('div', { className: "mt-4" },
                                                _react2.default.createElement('h3', { className: "text-lg font-semibold text-gray-700 mb-2" }, "Nameservers"),
                                                _react2.default.createElement('ul', { className: "list-disc list-inside text-sm text-gray-600" },
                                                    domainInfo.nameservers && domainInfo.nameservers.length > 0
                                                        ? domainInfo.nameservers.map((ns, index) => _react2.default.createElement('li', { key: index }, ns))
                                                        : _react2.default.createElement('li', null, "N/A")
                                                )
                                            ),
                                            // --- B·ªî SUNG: N√∫t truy c·∫≠p website ---
                                            _react2.default.createElement('div', { className: "mt-6 text-center" },
                                                _react2.default.createElement('button', {
                                                    onClick: () => openWebsite(domainInfo.domain),
                                                    className: "py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",
                                                },
                                                    _react2.default.createElement(_lucidereact.ExternalLink, { className: "w-4 h-4 inline mr-2" }), "Truy c·∫≠p Website"
                                                )
                                            )
                                            // --- H·∫æT B·ªî SUNG ---
                                        )
                                    ),
                                    // Hi·ªÉn th·ªã l·ªói chung n·∫øu c√≥
                                    (analysisProgress.whois.error || analysisProgress.hosting.error || analysisProgress.ssl.error) && !domainInfo && (
                                        _react2.default.createElement('div', { className: "bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mt-4", role: "alert" },
                                            _react2.default.createElement('strong', { className: "font-bold" }, "L·ªói ph√¢n t√≠ch! "),
                                            _react2.default.createElement('span', { className: "block sm:inline" }, "M·ªôt ho·∫∑c nhi·ªÅu d·ªãch v·ª• kh√¥ng th·ªÉ truy xu·∫•t d·ªØ li·ªáu.")
                                        )
                                    )
                                )
                            ),

                            /* SSL Management Tab */
                            activeTab === 'ssl' && (
                                _react2.default.createElement('div', { className: "space-y-6" },
                                    _react2.default.createElement('div', { className: "bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-lg p-6" },
                                        _react2.default.createElement('div', { className: "flex items-center mb-4" },
                                            _react2.default.createElement(_lucidereact.ShieldCheck, { className: "w-6 h-6 text-purple-600 mr-3" }),
                                            _react2.default.createElement('h2', { className: "text-xl font-bold text-purple-800" }, "B∆∞·ªõc 2: Qu·∫£n l√Ω Ch·ª©ng ch·ªâ SSL")
                                        ),
                                        _react2.default.createElement('div', { className: "space-y-4" },
                                            _react2.default.createElement('div', null,
                                                _react2.default.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, "Nh·∫≠p Link SSL Request / Order ID:"),
                                                _react2.default.createElement('input', {
                                                    type: "text",
                                                    value: inputLink,
                                                    onChange: handleSSLLinkInput,
                                                    placeholder: "d√°n link SSL request v√†o ƒë√¢y",
                                                    className: "w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-purple-500 focus:border-purple-500 sm:text-sm"
                                                })
                                            ),
                                            _react2.default.createElement('div', { className: "grid grid-cols-1 md:grid-cols-2 gap-4" },
                                                Object.keys(sslLinks).length > 0 && _react2.default.createElement('div', null,
                                                    _react2.default.createElement('h3', { className: "text-lg font-semibold text-gray-700 mb-2" }, "C√°c link li√™n quan:"),
                                                    _react2.default.createElement('button', { onClick: () => openLink(sslLinks.order), className: "w-full mb-2 text-left py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-500 hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" }, "Xem chi ti·∫øt ƒë∆°n h√†ng"),
                                                    _react2.default.createElement('button', { onClick: () => openLink(sslLinks.register), className: "w-full mb-2 text-left py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-500 hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500" }, "Y√™u c·∫ßu ƒëƒÉng k√Ω SSL"),
                                                    _react2.default.createElement('button', { onClick: () => openLink(sslLinks.renew), className: "w-full mb-2 text-left py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-yellow-500 hover:bg-yellow-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500" }, "Y√™u c·∫ßu gia h·∫°n SSL"),
                                                    _react2.default.createElement('button', { onClick: () => openLink(sslLinks.download), className: "w-full text-left py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500" }, "T·∫£i ch·ª©ng ch·ªâ SSL")
                                                )
                                            ),
                                            _react2.default.createElement('div', { className: "mt-4" },
                                                _react2.default.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, "Link SSL Request (ƒë·ªÉ t·ª± ƒë·ªông ƒëi·ªÅn):"),
                                                _react2.default.createElement('div', { className: "flex" },
                                                    _react2.default.createElement('input', {
                                                        type: "text",
                                                        value: sslRequestLink,
                                                        onChange: (e) => setSslRequestLink(e.target.value),
                                                        placeholder: "nh·∫≠p link SSL Request",
                                                        className: "flex-grow px-4 py-3 border border-gray-300 rounded-l-lg shadow-sm focus:ring-purple-500 focus:border-purple-500 sm:text-sm"
                                                    }),
                                                    _react2.default.createElement('button', {
                                                        onClick: processSSLRequestLink,
                                                        className: "px-4 py-3 bg-gray-200 text-gray-700 font-medium rounded-r-lg hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400"
                                                    }, "Process")
                                                )
                                            ),
                                            _react2.default.createElement('div', { className: "mt-4" },
                                                _react2.default.createElement('h3', { className: "text-lg font-semibold text-gray-700 mb-2" }, "Link qu·∫£n tr·ªã Domain (PA):"),
                                                _react2.default.createElement('div', { className: "flex" },
                                                    _react2.default.createElement('input', {
                                                        type: "text",
                                                        value: domainManagementLink,
                                                        readOnly: true,
                                                        placeholder: "Link s·∫Ω hi·ªÉn th·ªã ·ªü ƒë√¢y",
                                                        className: "flex-grow px-4 py-3 border border-gray-300 rounded-l-lg shadow-sm focus:ring-purple-500 focus:border-purple-500 sm:text-sm bg-gray-50"
                                                    }),
                                                    _react2.default.createElement('button', {
                                                        onClick: () => copyToClipboard(domainManagementLink, 'managementLink'),
                                                        className: "px-4 py-3 bg-yellow-500 text-white font-medium rounded-r-lg hover:bg-yellow-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500",
                                                    }, copied.managementLink ? 'Copied!' : 'Copy')
                                                )
                                            ),
                                            _react2.default.createElement('div', { className: "mt-4" },
                                                _react2.default.createElement('h3', { className: "text-lg font-semibold text-gray-700 mb-2" }, "G·ª£i √Ω x·ª≠ l√Ω SSL"),
                                                _react2.default.createElement('textarea', {
                                                    readOnly: true,
                                                    value: getResponseText(domainInfo?.registrar, domainInfo?.isp, domainInfo?.nameservers),
                                                    rows: "8",
                                                    className: "w-full p-3 border border-gray-300 rounded-lg shadow-sm bg-gray-50 text-sm focus:outline-none focus:ring-2 focus:ring-gray-300"
                                                })
                                            ),
                                            sslInfo && sslInfo.exists && sslInfo.days_remaining < 30 && _react2.default.createElement('div', { className: "mt-6 p-4 bg-orange-100 border-l-4 border-orange-500 text-orange-700 rounded-md" },
                                                _react2.default.createElement('p', { className: "font-bold mb-2" }, _react2.default.createElement(_lucidereact.AlertTriangle, { className: "w-5 h-5 inline mr-2" }), "Th√¥ng b√°o Gia h·∫°n SSL"),
                                                _react2.default.createElement('p', null, generateSSLRenewalNotice(sslInfo))
                                            )
                                        )
                                    )
                                )
                            ),

                            /* Certificate Template Tab */
                            activeTab === 'certificate' && (
                                _react2.default.createElement('div', { className: "space-y-6" },
                                    _react2.default.createElement('div', { className: "bg-gradient-to-r from-blue-50 to-cyan-50 border border-blue-200 rounded-lg p-6" },
                                        _react2.default.createElement('div', { className: "flex items-center mb-4" },
                                            _react2.default.createElement(_lucidereact.FileKey, { className: "w-6 h-6 text-blue-600 mr-3" }),
                                            _react2.default.createElement('h2', { className: "text-xl font-bold text-blue-800" }, "B∆∞·ªõc 3: T·∫°o Template Ch·ª©ng ch·ªâ SSL")
                                        ),
                                        _react2.default.createElement('div', { className: "space-y-4" },
                                            _react2.default.createElement('div', null,
                                                _react2.default.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, "Private Key:"),
                                                _react2.default.createElement('textarea', {
                                                    value: privateKey,
                                                    onChange: (e) => setPrivateKey(e.target.value),
                                                    rows: "5",
                                                    placeholder: "-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----",
                                                    className: "w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm font-mono"
                                                }),
                                                _react2.default.createElement('button', {
                                                    onClick: () => copyToClipboard(privateKey, 'privateKey'),
                                                    className: "mt-2 px-3 py-1.5 bg-blue-500 text-white rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
                                                }, copied.privateKey ? 'Copied!' : 'Copy')
                                            ),
                                            _react2.default.createElement('div', null,
                                                _react2.default.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, "Certificate:"),
                                                _react2.default.createElement('textarea', {
                                                    value: certificate,
                                                    onChange: (e) => setCertificate(e.target.value),
                                                    rows: "5",
                                                    placeholder: "-----BEGIN CERTIFICATE-----\n...\n-----END CERTIFICATE-----",
                                                    className: "w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm font-mono"
                                                }),
                                                _react2.default.createElement('button', {
                                                    onClick: () => copyToClipboard(certificate, 'certificate'),
                                                    className: "mt-2 px-3 py-1.5 bg-blue-500 text-white rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
                                                }, copied.certificate ? 'Copied!' : 'Copy')
                                            ),
                                            _react2.default.createElement('div', null,
                                                _react2.default.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, "CA Root:"),
                                                _react2.default.createElement('textarea', {
                                                    value: caRoot,
                                                    onChange: (e) => setCaRoot(e.target.value),
                                                    rows: "5",
                                                    placeholder: "-----BEGIN CERTIFICATE-----\n...\n-----END CERTIFICATE-----",
                                                    className: "w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm font-mono"
                                                }),
                                                _react2.default.createElement('button', {
                                                    onClick: () => copyToClipboard(caRoot, 'caRoot'),
                                                    className: "mt-2 px-3 py-1.5 bg-blue-500 text-white rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
                                                }, copied.caRoot ? 'Copied!' : 'Copy')
                                            ),
                                            _react2.default.createElement('button', {
                                                onClick: generateFormattedText,
                                                className: "w-full py-3 px-4 border border-transparent rounded-lg shadow-sm text-white font-medium bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"
                                            }, "T·∫°o N·ªôi dung Email SSL")
                                        )
                                    ),
                                    formattedText && (
                                        _react2.default.createElement('div', { className: "bg-white rounded-lg shadow-md p-6" },
                                            _react2.default.createElement('h3', { className: "text-lg font-semibold text-gray-700 mb-4" }, "N·ªôi dung Email SSL ƒë√£ ƒë·ªãnh d·∫°ng:"),
                                            _react2.default.createElement('textarea', {
                                                readOnly: true,
                                                value: formattedText,
                                                rows: "10",
                                                className: "w-full p-3 border border-gray-300 rounded-lg shadow-sm bg-gray-50 text-sm focus:outline-none focus:ring-2 focus:ring-gray-300 font-mono"
                                            }),
                                            _react2.default.createElement('button', {
                                                onClick: () => copyToClipboard(formattedText, 'formattedText'),
                                                className: "mt-2 px-3 py-1.5 bg-blue-500 text-white rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
                                            }, copied.formattedText ? 'Copied!' : 'Copy')
                                        )
                                    )
                                )
                            )
                        )
                    )
                )
            );
        }

        exports.default = SSLTool;
    </script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://kit.fontawesome.com/your-font-awesome-kit-code.js" crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/a25a1433e9.js" crossorigin="anonymous"></script>
</head>
<body>
    <div id="root"></div>
    <script>
        // --- Mount React App ---
        const rootElement = document.getElementById('root');
        // Ensure the component is correctly imported and rendered
        // Assuming 'exports.default' is the main component function
        // If using a bundler like Webpack/Vite, this part might be different
        // For simplicity, directly using the component function if available globally or after script load
        // In a real-world scenario, you'd likely have a separate main.js or App.js file
        // and a build process. For this standalone HTML, we'll try to access it directly.

        // If the script above defined `exports.default` globally (which it doesn't directly in a simple script tag)
        // we'd need a way to expose it. A common pattern is to assign it to window or a specific namespace.
        // For this example, let's assume the `SSLTool` function is available.

        // Mocking 'exports' if it's not defined globally by the loaded scripts
        if (typeof exports === 'undefined') {
            window.exports = {};
        }
        // We need to execute the script that defines SSLTool.
        // The provided code snippet is a React component definition.
        // To render it, we need React and ReactDOM.

        // Assuming the script has loaded and `SSLTool` is in `window.exports.default`
        // This relies on the fact that the `script` tag containing the React code is executed *before* this script.

        // If the script content is directly embedded like above, React would need to be available first.
        // Let's assume the provided script correctly defines `exports.default` as the component.
        // The following is a placeholder for how you'd typically render a React app.
        // If the `script` tag is intended to be self-contained and define the component,
        // then `exports.default` might be implicitly available after it runs.

        // A robust way for this structure:
        const renderApp = () => {
            const rootElement = document.getElementById('root');
            if (rootElement && window.exports && window.exports.default) {
                const SSLToolComponent = window.exports.default; // Access the component
                const root = ReactDOM.createRoot(rootElement);
                root.render(_react2.default.createElement(SSLToolComponent, null));
            } else {
                console.error("React or SSLTool component not found. Ensure scripts are loaded correctly.");
            }
        };

        // Wait for React and ReactDOM to be ready, then render the app
        // Check if React and ReactDOM are available
        if (typeof _react2.default !== 'undefined' && typeof ReactDOM !== 'undefined') {
            renderApp();
        } else {
            // Fallback: Wait for the DOM to load and then check again
            window.addEventListener('load', () => {
                if (typeof _react2.default !== 'undefined' && typeof ReactDOM !== 'undefined') {
                    renderApp();
                } else {
                    console.error("React and ReactDOM are still not available after DOM load.");
                }
            });
        }
        // --- End Mount React App ---
    </script>
</body>
</html>